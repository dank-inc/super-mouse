{"version":3,"sources":["src/lib/SuperMouse.ts","src/index.ts"],"names":[],"mappings":";;;;;;ACAA,IAAA,YAAA,GAAA,OAAA,CAAA,kBAAA,CAAA;ADmBA,IAAA,UAAA;ACjBA,ADiBA,ICjBM,KAAK,GAAG,IAAI,YAAA,CAAA,UAAJ,CAAe;AAAE,ADiB/B,ECjB+B,OAAO,EAAE,CDiBxC;ACjB6B,ADkB3B,CClBY,CAAd;AAEA,ADiBE,ICjBI,ODiBJ,QCjBmB,EDiBnB,CCjBsB,ADiBV,EAAZ,EAAyC,ICjBX,CAAC,aAAT,CAAuB,SAAvB,CAAxB;AAEA,ADeE,ICfE,CAAC,GDeH,KAAA,GAAA,ICfF,ADeE,ECfoB,MAAM,IAAI,KAAJ,CAAU,sBAAV,CAAN;;AAEtB,IAAM,IDaU,OAAO,CCbL,EDaK,CCbF,CDaE,CAAA,OCbjB,YAAe,CAAC,SAAD,EAAmB;AACtC,MAAM,MAAM,GAAG,QAAQ,CAAC,aAAT,CAAuB,QAAvB,CAAf;AAEA,ADgCA,EChCA,MAAM,CAAC,ADgCP,KChCA,GAAe,GDgCf,GAAc,GChCU,CAAC,MDgCV,CAAD,EAAc,EChC5B;AACA,ADgCE,EChCF,IDgCE,EChCI,CAAC,IDgCE,CAAC,CChCV,EDgCE,CChCc,ADgCF,SChCW,CAAC,YAA1B,CDgCmC,CAAC,CAAC,MAAnC;AC9BF,AD+BE,MC/BI,AD+BJ,GC/BO,GAAG,CD+BH,CAAC,GAAR,CC/BgB,AD+BJ,CC/BK,UAAP,CAAkB,IAAlB,CAAZ,ID+BE,EAAmC,CAAnC,EAAsC,KAAtC;AC7BF,AD8BE,MC9BE,AD8BF,CC9BG,GAAL,CD8BM,CC9BI,AD8BH,MC9BS,CD8Bd,GC9BkB,AD8BH,IAAf,CC9Bc,CAAU,qBAAV,CAAN;AAEV,AD8BE,EC9BF,GAAG,CAAC,AD8BF,KAAI,CAAC,GC9BP,GAAgB,CD8Bd,IAAgB,EAAhB,EC9BF;AACA,AD+BE,EC/BF,GAAG,CAAC,AD+BF,CAAC,CAAC,MC/BJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CD+BjB,KC/BuB,CAAC,KAA1B,EAAiC,MAAM,CAAC,MAAxC;AAEA,AD8BE,MAAA,CAAC,CAAC,CC9BG,cD8BL;AC9BO,ADgCP,IChCO,EDgCP,CAAC,CAAC,EChCW,EAAA,MAAR,EDgCL,GAAiB,IAAjB;AChCe,ADiChB,ICjCgB,CDsBjB,ECtBoB,EAAA;AAAb,GAAP;AACD,ADkCC,CChDF,QDgDE,YAAA,GAAe,UAAC,CAAD,EAAc;AAC3B;ACjCE,ADkCF,IClCE,EAAA,ADkCF,GClCoB,EDkChB,CAAC,OAAL,EClCgC,CAAC,CDkCjB,CAAC,CAAC,MAAF,GAAW,CAAC,CAA5B,CClCgC,CAA9B;AAAA,ADmCF,ICnCI,EDmCJ,ICnCU,CDmCN,CAAC,CCnCK,EAAA,CAAA,GDmCV,GCnCE,CDmCc,CAAC,CAAC,MAAF,GAAW,CAAC,CAA5B;ACnCE,ADoCF,ICpCY,EDoCZ,CCpCe,GAAA,EAAA,CAAA,ADoCR,CAAC,ECpCN,CDoCF,CClCJ,ADkCgB,mBAAZ,EAAiC,KAAI,CAAC,OAAtC,EAA+C,KAAI,CAAC,OAApD;AACD,KALD;;AC5BF,ADmCE,SAAA,MCnCa,CAAC,GDmCd,GAAa,KCnCf,CAA4B,IDmCZ,CAAD,CCnCf,CDmC6B;ACjC7B,ADkCI,IClCE,KAAK,GAAG;AACZ,ADmCE,ECnCF,GAAG,EAAE,GDmCG,KAAK,GAAG,KAAI,CAAC,CAAnB;ACpCU,ADqCV,CCrCJ,SDqCU,KAAK,GAAG,KAAI,CAAC,CAAnB;AAEA,MAAA,KAAI,CAAC,CAAL,GAAS,CAAC,CAAC,OAAX;ACnCJ,ADoCI,ICpCE,EDoCF,ECpCM,GAAG,ADoCL,CAAC,CAAL,GAAS,CAAC,CAAC,ECpCT,IAAO,CDoCT,ECpCS;AACX,ADqCE,MCrCI,ADqCJ,KCrCS,ADqCL,CAAC,CAAL,CCrCY,EDqCH,ICrCS,CAAC,ADqCN,CAAC,CAAL,GCrCX,ADqCoB,MAAM,CAAC,UAAzB;ACpCF,ADqCE,MCrCI,ADqCJ,KAAI,CCrCM,ADqCL,CAAL,ECrCa,CDqCJ,KCrCU,ADqCN,CCrCO,ADqCN,CAAL,GAAS,ECrCpB,IDqC0B,CAAC,WAAzB;;ACnCI,ADqCJ,MCrCI,EAAA,EDqCA,CCrCsC,ADqCrC,KCrC0C,ADqCtC,CCrCuC,ADqCtC,OAAV,CCrC0C,CDqCvB,CCrCf;AAAA,ADsCF,MCtCI,CAAC,CDsCL,ECtCK,EAAA,CAAA,ADsCD,CCtCF,ADsCG,OAAL,GAAe,IAAf;ACtCE,ADuCF,MCvCO,CAAC,GAAA,EAAA,CAAA,CAAN;AAAA,ADwCH,MCxCW,CDyBa,CAiBzB,KC1CmB,GAAA,EAAA,CAAA,OAAf;AAAA,MAAiB,OAAO,GAAA,EAAA,CAAA,OAAxB;AAAA,MAA0B,OAAO,GAAA,EAAA,CAAA,OAAjC;AD4CJ,UAAM,KAAK,GAAG,IAAA,CAAA,GAAA,CAAC,KAAK,GAAG,KAAI,CAAC,CAAd,EAAoB,CAApB,IAAwB,IAAA,CAAA,GAAA,CAAC,KAAK,GAAG,KAAI,CAAC,CAAd,EAAoB,CAApB,CAAtC;AC1CF,AD4CE,MC5CE,AD4CF,KAAI,CAAC,CC5CP,EAAa,ID4CX,CC5CgB,CAAC,ED4CD,CC5CL,GAAY,CD4CF,GAAG,CC5CI,CAAC,AD4C7B,CArByB,CAuBzB,CC9CuB,GAAY,IAAI,CAAC,MAAL,KAAgB,GAAxC;AAEb,AD6CC,EC7CD,GAAG,ADqBH,CCrBI,ADrBqC,CAoEzC,QC/CA,GAAgB,SAAO,KAAK,CAAC,GAAb,GAAgB,aAAhC;AAEA,MAAM,MAAM,GAAG,OAAO,GAAG,EAAV,GAAe,IAAI,CAAC,GAAL,CAAS,OAAO,GAAG,GAAnB,EAAwB,CAAxB,CAA9B;AACA,EAAA,GAAG,CAAC,QAAJ,CAAa,CAAC,GAAG,KAAJ,GAAY,MAAM,GAAG,CAAlC,EAAqC,CAAC,GAAG,MAAJ,GAAa,MAAM,GAAG,CAA3D,EAA8D,MAA9D,EAAsE,MAAtE,EAXW,CAaX;AD4CA,SAAA,QAAA,GAAW,YAAA;AC3CX,AD2CiB,EC3CjB,GAAG,CAAC,OD2Ca,EC3CjB,GAAgB,AD2CC,WC3CjB;AACA,AD0CqB,EC1CrB,GAAG,AD0CH,CC1CI,QAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,KAAnB,EAA0B,MAA1B;AAEA,EAAA,KAAK,CAAC,MAAN;AACA,ADyCA,ECzCA,MAAM,CAAC,ADyCP,MAAA,GAAS,YCzCT,ADyCS,CCzCoB,IAA7B;AACD,ADyCG,CC5DJ,KD4DI,KAAI,CAAC,OAAL,IAAgB,IAAhB;AACA,MAAA,KAAI,CAAC,OAAL,GAAe,KAAf;ACxCJ,ADyCG,ICzCC,CDsCF;ACpCF,OAAO,CAAC,GAAR,CAAY,aAAZ,EAA2B,KAA3B;ADnCI,SAAK,CAAL,GAAS,CAAT;AACA,SAAK,CAAL,GAAS,CAAT;AACA,SAAK,CAAL,GAAS,CAAT;AACA,SAAK,CAAL,GAAS,CAAT;AACA,SAAK,OAAL,GAAe,CAAf;AACA,SAAK,OAAL,GAAe,CAAf;AAEA,SAAK,OAAL,GAAe,CAAf;AACA,SAAK,OAAL,GAAe,KAAf;AACA,SAAK,OAAL,GAAe,CAAC,CAAC,OAAjB;AACA,SAAK,QAAL,GAAgB,KAAhB;AACA,SAAK,OAAL,GAAe,KAAf;AAEA,IAAA,MAAM,CAAC,gBAAP,CAAwB,WAAxB,EAAqC,KAAK,UAA1C;AACA,IAAA,MAAM,CAAC,gBAAP,CAAwB,WAAxB,EAAqC,KAAK,WAA1C,EAfuC,CAiBvC;;AACA,IAAA,MAAM,CAAC,gBAAP,CAAwB,YAAxB,EAAsC,KAAK,YAA3C;AACA,IAAA,MAAM,CAAC,gBAAP,CAAwB,aAAxB,EAAuC,UAAC,CAAD,EAAE;AAAK,aAAA,CAAC,CAAC,cAAF,EAAA;AAAkB,KAAhE;AACD;;AAwDH,SAAA,UAAA;AA9EA,CAAA,EAAA;;AAAa,OAAA,CAAA,UAAA,GAAA,UAAA","file":"src.f10117fe.js","sourceRoot":"..","sourcesContent":["export type SuperMouseParams = {\r\n  logging?: boolean\r\n}\r\n\r\nexport interface SuperMouse {\r\n  x: number\r\n  y: number\r\n  u: number\r\n  v: number\r\n  scrollX: number\r\n  scrollY: number\r\n  inertia: number\r\n\r\n  started: boolean\r\n  logging: boolean\r\n  dragging: boolean\r\n  clicked: boolean\r\n}\r\n\r\nexport class SuperMouse {\r\n  // TODO: Modifyer keys\r\n  constructor({ logging }: SuperMouseParams) {\r\n    this.x = 0\r\n    this.y = 0\r\n    this.u = 0\r\n    this.v = 0\r\n    this.scrollX = 0\r\n    this.scrollY = 0\r\n\r\n    this.inertia = 0\r\n    this.started = false\r\n    this.logging = !!logging\r\n    this.dragging = false\r\n    this.clicked = false\r\n\r\n    window.addEventListener(\"mousemove\", this.handleMove)\r\n    window.addEventListener(\"mousedown\", this.handleClick)\r\n\r\n    // @ts-ignore\r\n    window.addEventListener(\"mousewheel\", this.handleScroll)\r\n    window.addEventListener(\"contextmenu\", (e) => e.preventDefault())\r\n  }\r\n\r\n  handleClick = (e: MouseEvent) => {\r\n    console.log(`Clicked button => ${e.button}`)\r\n    console.log(\"SuperMouse.click =>\", e, this)\r\n    this.clicked = true\r\n\r\n    this.inertia += 10\r\n\r\n    e.preventDefault()\r\n    e.stopPropagation()\r\n\r\n    e.cancelBubble = true\r\n  }\r\n\r\n  handleScroll = (e: WheelEvent) => {\r\n    // TODO: invert scroll option\r\n    this.scrollX += e.deltaX * -1\r\n    this.scrollY += e.deltaY * -1\r\n    console.log(\"SuperMouse.scroll\", this.scrollX, this.scrollY)\r\n  }\r\n\r\n  handleMove = (e: MouseEvent) => {\r\n    // get delta time\r\n\r\n    const lastU = this.u\r\n    const lastV = this.v\r\n\r\n    this.x = e.clientX\r\n    this.y = e.clientY\r\n\r\n    this.u = this.x / window.innerWidth\r\n    this.v = this.y / window.innerHeight\r\n\r\n    if (!this.started) {\r\n      this.started = true\r\n      return\r\n    }\r\n\r\n    // get vector/ add to inertia\r\n\r\n    const force = (lastU - this.u) ** 2 + (lastV - this.v) ** 2\r\n\r\n    this.inertia += force * 50\r\n\r\n    // console.log(force, this.inertia)\r\n  }\r\n\r\n  // TODO: better update / get state cycle\r\n\r\n  getState = () => this\r\n\r\n  update = () => {\r\n    this.inertia *= 0.97\r\n    this.clicked = false\r\n  }\r\n}\r\n","import { SuperMouse } from \"./lib/SuperMouse\"\r\n\r\nconst mouse = new SuperMouse({ logging: true })\r\n\r\nconst canvasContainer = document.querySelector(\"#canvas\")\r\n\r\nif (!canvasContainer) throw new Error(\"No Canvas Container!\")\r\n\r\nconst createCanvas = (container: Element) => {\r\n  const canvas = document.createElement(\"canvas\")\r\n\r\n  canvas.width = container.clientWidth\r\n  canvas.height = container.clientHeight\r\n\r\n  const ctx = canvas.getContext(\"2d\")\r\n\r\n  if (!ctx) throw new Error(\"Can't create 2d ctx\")\r\n\r\n  ctx.fillStyle = \"#111111\"\r\n  ctx.fillRect(0, 0, canvas.width, canvas.height)\r\n\r\n  return { canvas, ctx }\r\n}\r\n\r\nconst { canvas, ctx } = createCanvas(canvasContainer)\r\n\r\n// TODO: put mouse listener on canvas instead.\r\n\r\ncanvasContainer.appendChild(canvas)\r\n\r\nconst state = {\r\n  hue: 40,\r\n}\r\n\r\nconst draw = () => {\r\n  const width = canvas.width\r\n  const height = canvas.height\r\n\r\n  const { u, v, inertia, clicked, scrollY } = mouse.getState()\r\n\r\n  if (clicked) state.hue = state.hue + Math.random() * 120\r\n\r\n  ctx.fillStyle = `hsl(${state.hue}, 70%, 50%)`\r\n\r\n  const sqSize = inertia * 10 + Math.max(scrollY * 0.2, 0)\r\n  ctx.fillRect(u * width - sqSize / 2, v * height - sqSize / 2, sqSize, sqSize)\r\n\r\n  // bg draw\r\n  ctx.fillStyle = \"#11111111\"\r\n  ctx.fillRect(0, 0, width, height)\r\n\r\n  mouse.update()\r\n  window.requestAnimationFrame(draw)\r\n}\r\n\r\ndraw()\r\n\r\nconsole.log(\"Super Mouse\", mouse)\r\n"]}